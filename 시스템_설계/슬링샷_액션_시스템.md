# 슬링샷 액션 시스템

## 시스템 개요
**시스템명**: 슬링샷 액션 시스템  
**분류**: 전투/게임플레이 핵심 메커니즘  
**중요도**: 핵심

## 목적 및 기대 효과
시그나노타의 세계관과 직관적으로 연결되는 핵심 게임플레이 메커니즘을 구현하여 짧은 게임 세션에서도 즉각적인 재미와 전략적 깊이를 제공한다. 드래그 앤 릴리스 방식의 슬링샷 액션으로 누구나 쉽게 플레이할 수 있으면서도 숙련을 통한 기술 상승이 가능한 게임플레이를 구현한다.

## 시스템 상세 설명
슬링샷 액션 시스템은 드래그 방향의 반대로 캐릭터를 발사하는 물리 기반 조작 메커니즘이다. 드래그 거리에 비례하여 발사 힘이 결정되며, 벽과의 충돌 시 반동, 적과의 충돌 시 대미지 계산, 연속 반사를 통한 콤보 시스템 등 다양한 상호작용이 구현된다. 뱀서라이크 요소와 결합하여 매 런마다 다양한 상황에서의 적응력과 전략적 선택을 강조한다.

## 핵심 구성 요소
### 물리 기반 발사 메커니즘
- **발사 원리**: 드래그 방향과 반대로 캐릭터 발사
- **힘 계산**: 드래그 거리에 비례하는 발사 힘 (최대값 제한)
- **속도 벡터**: 방향과 힘에 따른 초기 속도 결정
- **마찰 및 감속**: 시간과 표면에 따른 속도 감소
- **발사 예측**: 드래그 시 예상 궤적 점선으로 표시 (첫 번째 충돌까지만)

### 충돌 및 반동 시스템
- **표면별 반동 계수**: 
  - 일반 벽: 기본 반동 (물리 법칙에 따름)
  - 탄성 벽: 증가된 반동 (속도 증가)
  - 점성 벽: 감소된 반동 (속도 감소)
  - 특수 표면: 독특한 효과 (방향 변경, 워프 등)
- **반동 각도 계산**: 입사각 = 반사각 (기본), 표면 특성에 따른 각도 변형
- **연속 반동**: 연속적인 벽 충돌 시 콤보 시스템과 보너스 효과

### 대미지 계산 시스템
- **기본 공식**: (캐릭터 공격력 × 속도 계수 × 각도 계수)
- **크리티컬**: 높은 속도 또는 특정 각도에서 추가 대미지
- **특수 효과**: 상태이상, 지속 대미지 등

### 전략적 발사 요소
- **정지 상태**: 완전히 정지한 후에만 재발사 가능
- **당구식 위치 선정**: 적절한 위치에 정지하는 것이 전략적으로 중요
- **뱅크샷 활용**: 벽을 통한 간접 타격 전략, 기하학적 계산 요구

## 플레이어 상호작용
플레이어는 화면을 드래그하여 발사 방향과 힘을 결정하고, 손가락/마우스 버튼을 떼면 캐릭터가 발사된다. 발사 후에는 캐릭터가 완전히 정지할 때까지 기다려야 하며, 특수 능력은 별도의 버튼으로 활성화할 수 있다. 플레이어는 직선 발사, 벽 반사, 환경 활용 등 다양한 전략을 상황에 맞게 선택해야 한다.

## 게임 내 영향
### 게임플레이 영향
- 모든 전투와 이동이 슬링샷 액션을 통해 이루어짐
- 플레이어의 기술과 판단력이 직접적으로 게임 결과에 영향
- 각 맵과 스테이지마다 독특한 물리적 특성과 전략 요구

### 밸런스 영향
- 드래그 거리와 발사 힘의 비례 관계 조정으로 밸런스 유지
- 캐릭터별 다른 물리 특성(질량, 마찰, 반동 등)으로 차별화
- 환경 요소의 다양성을 통한 밸런스 및 전략 다양화

### 프로그레션 영향
- 캐릭터 능력치 향상에 따른 슬링샷 효율 증가
- 특수 장비와 능력을 통한 슬링샷 액션 변형 및 강화
- 런마다 다른 환경과 아이템으로 인한 전략 변화

## 기술적 구현
```
// 슬링샷 발사 기본 로직
function fireSlingshot(dragVector) {
  // 드래그 벡터 반전
  let forceVector = dragVector.multiply(-1);
  
  // 최대 힘 제한
  let magnitude = Math.min(forceVector.magnitude(), MAX_FORCE);
  forceVector = forceVector.normalize().multiply(magnitude);
  
  // 캐릭터에 힘 적용
  character.velocity = forceVector;
  character.isMoving = true;
  
  // 특수 능력 적용 (있는 경우)
  applySpecialAbilities();
  
  // 예측 경로 숨기기
  hidePredictionPath();
}

// 충돌 감지 및 반응
function handleCollision(collisionInfo) {
  let surfaceType = collisionInfo.surface.type;
  let bounceFactor = getSurfaceBounceFactor(surfaceType);
  
  // 반동 각도 계산
  let incidenceAngle = calculateIncidenceAngle(collisionInfo);
  let reflectionAngle = calculateReflectionAngle(incidenceAngle, surfaceType);
  
  // 속도 업데이트
  updateVelocityAfterCollision(reflectionAngle, bounceFactor);
  
  // 콤보 시스템 업데이트
  updateComboSystem(collisionInfo);
  
  // 특수 표면 효과 적용
  applySpecialSurfaceEffects(surfaceType);
}
```

## UI 요소
- **드래그 및 발사 UI**: 
  - 드래그 방향과 거리 시각화
  - 발사 힘 게이지 표시 (색상 변화로 최적 발사 힘 표시)
  - 궤적 예측 점선 (첫 충돌까지)
- **상태 표시**:
  - 현재 속도와 방향 표시
  - 콤보 카운터 및 보너스
  - 충돌 시 시각/청각 피드백
- **특수 능력 UI**:
  - 특수 능력 아이콘 및 쿨다운 표시
  - 활성화 버튼 및 직관적 시각 효과

## 확장성 및 미래 계획
- **새로운 물리 효과**: 중력 변화, 시간 왜곡, 텔레포트 등
- **멀티플레이어 모드**: PvP 당구 모드, 협동 퍼즐 등
- **환경 상호작용 확장**: 파괴 가능한 지형, 동적 장애물 등
- **특수 모드**: 시간 제한 챌린지, 최소 발사 횟수 클리어 등

## 참고 사례
- 시그나노타의 핵심 게임플레이 메커니즘
- Angry Birds의 발사 메커니즘
- Pool/당구 게임의 물리 기반 반사 메커니즘
- 로그라이크 요소를 가진 Hades, Dead Cells 등의 프로그레션 시스템

## 리스크 및 대응 방안
- **조작 정밀도 이슈**: 
  - 모바일/PC 플랫폼별 최적화된 컨트롤 구현
  - 도움선 및 보조 시스템 제공으로 접근성 향상
- **물리 엔진 버그**:
  - 극단적 상황에서의 안정성 테스트
  - 비정상 속도/위치 감지 및 복구 시스템
- **난이도 밸런스**:
  - 플레이어 실력 범위에 맞는 난이도 커브 설계
  - 동적 난이도 조정 시스템 고려

## 관련 문서
- [프로그레션 시스템](프로그레션_시스템.md)
- [캐릭터 설계](캐릭터_설계.md)
- [자석 메커니즘 상세](자석_메커니즘_상세.md)

## 작성자 및 최종 수정일
- 최초 작성자: Claude
- 최종 수정일: 2025-05-12

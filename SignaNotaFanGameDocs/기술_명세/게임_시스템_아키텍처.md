# 게임 시스템 아키텍처

## 1. 물리 시스템 설계

### 슬링샷 메커니즘 구현
- **물리 엔진 설정**:
  - Unity Box2D 물리 엔진 활용
  - 캐릭터별 Rigidbody2D 파라미터 차별화 (질량, 드래그, 탄성)
  - 레이어 기반 충돌 시스템 설정
  
- **발사 메커니즘**:
  - 터치 드래그로 방향/힘 벡터 계산
  - 고무줄 효과 시각화 (LineRenderer 활용)
  - 궤적 예측 시스템 (RaycastHit2D 활용)
  
- **충돌 처리**:
  - 표면 타입별 반응 차별화 (일반 벽, 탄성 벽, 점성 벽)
  - 다중 충돌 처리 및 물리 연산 최적화
  - 콤보 시스템 연동 (연속 충돌 감지)

- **캐릭터 물리 특성**:
  - 캐릭터별 물리 머티리얼 (PhysicsMaterial2D) 설정
  - 물리 특성 업그레이드 시스템 연동
  - 특수 상태 물리 효과 (감속, 증속, 중력 변화 등)

### 환경 상호작용
- **파괴 가능 오브젝트**:
  - 체력 기반 파괴 시스템
  - 파괴 시 파티클 및 물리 시뮬레이션
  - 파괴 보상 (코어, 아이템 드롭)
  
- **특수 환경 요소**:
  - 텔레포터: 캐릭터 순간 이동
  - 가속기: 캐릭터 속도/방향 변경
  - 위험 지형: 접촉 시 피해
  - 바람/중력 영역: 물리 법칙 수정 영역

- **트리거 시스템**:
  - 압력판, 스위치, 타이머 등의 상호작용 요소
  - 스테이지 내 퍼즐 요소 구현
  - 숨겨진 영역 및 보상 접근 메커니즘

## 2. 던전 생성 시스템

### 프로시저럴 맵 생성
- **방 템플릿 시스템**:
  - 미리 디자인된 방 유형 (전투, 보상, 상점, 보스 등)
  - 난이도별 방 풀 관리
  - 스테이지별 고유 방 템플릿
  
- **맵 레이아웃 알고리즘**:
  - Binary Space Partitioning (BSP) 기반 방 배치
  - 덴드로이드 패턴의 연결 복도 생성
  - 진행도별 맵 복잡성 증가
  
- **시드 기반 생성**:
  - 일일 챌린지용 고정 시드 활용
  - 재현 가능한 맵 생성 (디버깅용)
  - 유저 공유 가능한 시드 시스템 (향후 확장)

### 적 배치 시스템
- **난이도 스케일링**:
  - 진행도에 따른 적 수, 유형, 강도 조정
  - 경과 시간에 따른 적 강화 메커니즘
  - 플레이어 실력 측정 및 동적 난이도 조정
  
- **적 그룹 생성**:
  - 적 조합 템플릿 (시너지 기반 그룹)
  - 웨이브 기반 스폰 시스템
  - 방 유형별 특화된 적 배치

- **보스 인카운터**:
  - 스테이지당 1개의 고정 보스 방
  - 보스 전투 패턴 및 페이즈 관리
  - 보스 전투 환경 변화 시스템

### 보상 분배 시스템
- **아이템 드롭 테이블**:
  - 확률 기반 아이템 등급 결정
  - 진행도 기반 아이템 풀 관리
  - 희귀도별 드롭 확률 보정
  
- **보상 균형**:
  - 방 클리어 보상 스케일링
  - 리스크/리워드 균형 설계
  - 플레이어 캐릭터/상태에 맞춘 보상 조정
  
- **특별 보상**:
  - 숨겨진 보상 방
  - 도전 과제 완료 보상
  - 행운 요소 (럭키 드롭)

## 3. 전투 및 데미지 시스템

### 데미지 계산
- **기본 공식**:
  ```
  최종 데미지 = (기본 데미지 * 속도 계수 * 크리티컬 계수) + 추가 데미지
  ```
  
- **데미지 타입**:
  - 물리: 기본적인 충돌 데미지
  - 속성: 캐릭터별 특수 데미지 (불, 전기 등)
  - 지속: 시간에 따른 지속 데미지 (DoT)
  
- **방어 및 저항**:
  - 적 타입별 데미지 저항
  - 보호막 및 무적 상태 처리
  - 데미지 감소 효과 적용

### 히트박스 시스템
- **정밀 충돌 감지**:
  - 캐릭터와 적의 복합 콜라이더 설정
  - 약점 부위 히트박스 (크리티컬 존)
  - 방향별 데미지 계수 (후면 공격 보너스)
  
- **충돌 피드백**:
  - 타격감 피드백 (화면 효과, 진동)
  - 데미지 숫자 표시
  - 히트스톱 효과 (순간 슬로우)

### 전투 균형 시스템
- **난이도 곡선**:
  - 스테이지별 적절한 난이도 상승
  - 보스 전투의 도전성 설계
  - 플레이어 성장과 적 강화의 균형
  
- **메타 밸런싱**:
  - 플레이 데이터 분석 (향후 업데이트 용)
  - 캐릭터간 균형 조정
  - 과도한 조합/시너지 제한

## 4. 세이브 및 진행 시스템

### 플레이어 데이터 저장
- **로컬 세이브**:
  - PlayerPrefs 활용 기본 설정 저장
  - JSON 파일 기반 상세 데이터 저장
  - 백업 및 복원 시스템
  
- **클라우드 세이브** (향후 확장):
  - 크로스 플랫폼 진행 동기화
  - 플레이어 프로필 및 성과 저장
  - 피드백 및 분석 데이터 수집

### 진행 상태 관리
- **게임 진행 추적**:
  - 해금된 캐릭터, 스테이지, 아이템
  - 업적 및 도전 과제 진행도
  - 통계 및 기록 (플레이 시간, 최고 기록 등)
  
- **런 데이터**:
  - 현재 런 상태 임시 저장
  - 플레이 중단 시 런 상태 보존
  - 데스 리캡 (사망 통계 및 분석)

## 5. UI 및 피드백 시스템

### 인게임 UI
- **HUD 요소**:
  - 체력, 에너지, 레벨 표시
  - 미니맵 및 탐색 정보
  - 슬링샷 조작 가이드라인
  
- **전투 피드백**:
  - 데미지 표시
  - 상태 효과 아이콘
  - 콤보 카운터 및 보너스

- **획득 정보**:
  - 아이템 획득 알림
  - 경험치 및 코어 획득 표시
  - 업적 달성 알림

### 메뉴 시스템
- **메인 메뉴**:
  - 게임 모드 선택
  - 캐릭터 선택 및 커스터마이징
  - 옵션 및 설정
  
- **업그레이드 화면**:
  - 영구 업그레이드 트리 시각화
  - 캐릭터 능력 및 스탯 정보
  - 코어 사용 및 관리
  
- **도감 및 콜렉션**:
  - 발견한 적, 아이템, 능력 기록
  - 업적 및 도전 목록
  - 통계 및 기록 확인